# Stage 3 - Асинхронный сервер
* Теперь задачи работы с сокетом и задачи работы с хранилищем разделены
* Запросы к /status работают быстрее и не ждут пока выполнятся другие запросы, связанные с хранилищем

## GET
### CPU
Селекторы теперь только разгребают запросы и ставят задачи в очередь, а работу с хранилищем и ответом занимаются воркеры
### ALLOC
Больше всего памяти выделяется воркерами при запросах к хранилищу
### LOCK
Методы `sendResponse` и `sendError` у `HttpSession` - synchronized, на них и локи

## PUT
### CPU
На работу с сокетом времени тратится больше, чем непосредственно на саму вставку
### ALLOC
Аналогично GET, большая часть памяти выделяется на вставку в хранилище
### LOCK
Блокировки опять же в synchronized методах `HttpSession`

# Stage 4 - Шардирование
* Теперь это не просто сервер, а кластер, поэтому разные запросы уходят на разные ноды в зависимости от ключа
* Немалую часть времени теперь занимает проксирование запроса на другие ноды (так как мы стреляли запросами по одной ноде)
* Часть времени уходит на определение, к какой ноде относится ключ, однако объем затраченного на это времени очень маленький